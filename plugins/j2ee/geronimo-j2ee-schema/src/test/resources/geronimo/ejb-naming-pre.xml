<?xml version="1.0"?>
<!--
   Licensed to the Apache Software Foundation (ASF) under one or more
   contributor license agreements.  See the NOTICE file distributed with
   this work for additional information regarding copyright ownership.
   The ASF licenses this file to You under the Apache License, Version 2.0
   (the "License"); you may not use this file except in compliance with
   the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<openejb-jar
    xmlns="http://openejb.apache.org/xml/ns/openejb-jar-2.3">

    <environment>
        <moduleId>
            <groupId>test</groupId>
            <type>car</type>
            <artifactId>testclient</artifactId>
            <version>1</version>
        </moduleId>
    </environment>

    <cmp-connection-factory>
        <pattern>
            <groupId>geronimo</groupId>
            <artifactId>system-database</artifactId>
        </pattern>
    </cmp-connection-factory>

    <enterprise-beans>
        <!--
        ########################################################
        Stateless
        ########################################################
        -->
        <session>
            <ejb-name>BasicStatelessBean</ejb-name>
            <jndi-name>client/tests/stateless/BasicStatelessHome</jndi-name>
            <resource-ref>
                <ref-name>stateless/references/Resource_manager_access</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>BasicBMTStatelessBean</ejb-name>
            <jndi-name>client/tests/stateless/BeanManagedBasicStatelessHome</jndi-name>
            <resource-ref>
                <ref-name>stateless/references/Resource_manager_access</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>DatabaseBean</ejb-name>
            <jndi-name>client/tools/DatabaseHome</jndi-name>
            <resource-ref>
                <ref-name>database</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>BMTStatelessBean</ejb-name>
            <jndi-name>client/tests/stateless/BeanManagedTransactionTests/EJBHome</jndi-name>
            <resource-ref>
                <ref-name>database</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>EncStatelessBean</ejb-name>
            <jndi-name>client/tests/stateless/EncBean</jndi-name>
            <resource-ref>
                <ref-name>datasource</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>StatelessRMIIIOPBean</ejb-name>
            <jndi-name>client/tests/stateless/RMI-over-IIOP/EJBHome</jndi-name>
        </session>



        <!--
        ########################################################
        Stateless
        ########################################################
        -->
        <session>
            <ejb-name>BasicStatefulBean</ejb-name>
            <jndi-name>client/tests/stateful/BasicStatefulHome</jndi-name>
            <resource-ref>
                <ref-name>stateful/references/Resource_manager_access</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>BasicBMTStatefulBean</ejb-name>
            <jndi-name>client/tests/stateful/BeanManagedBasicStatefulHome</jndi-name>
            <resource-ref>
                <ref-name>stateful/references/Resource_manager_access</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>BMTStatefulBean</ejb-name>
            <jndi-name>client/tests/stateful/BeanManagedTransactionTests/EJBHome</jndi-name>
            <resource-ref>
                <ref-name>datasource</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>EncStatefulBean</ejb-name>
            <jndi-name>client/tests/stateful/EncBean</jndi-name>
            <resource-ref>
                <ref-name>datasource</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </session>
        <session>
            <ejb-name>StatefulRMIIIOPBean</ejb-name>
            <jndi-name>client/tests/stateful/RMI-over-IIOP/EJBHome</jndi-name>
        </session>

        <!--
        ########################################################
        BMP
        ########################################################
        -->
        <entity>
            <ejb-name>BasicBmpBean</ejb-name>
            <jndi-name>client/tests/entity/bmp/BasicBmpHome</jndi-name>
            <resource-ref>
                <ref-name>jdbc/basic/entityDatabase</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </entity>
        <entity>
            <ejb-name>AOBasicBmpBean</ejb-name>
            <jndi-name>client/tests/entity/bmp/allowed_operations/EntityHome</jndi-name>
            <resource-ref>
                <ref-name>jdbc/basic/entityDatabase</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
            <resource-ref>
                <ref-name>entity/references/Resource_manager_access</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </entity>
        <entity>
            <ejb-name>EncBmpBean</ejb-name>
            <jndi-name>client/tests/entity/bmp/EncBean</jndi-name>
            <resource-ref>
                <ref-name>datasource</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
            <resource-ref>
                <ref-name>jdbc/basic/entityDatabase</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </entity>
        <entity>
            <ejb-name>BmpRMIIIOPBean</ejb-name>
            <jndi-name>client/tests/entity/bmp/RMI-over-IIOP/EJBHome</jndi-name>
        </entity>

        <!--
        ########################################################
        BMP
        ########################################################
        -->

        <entity>
            <ejb-name>BasicCmpBean</ejb-name>
            <jndi-name>client/tests/entity/cmp/BasicCmpHome</jndi-name>
            <query>
                <query-method>
                    <method-name>findByLastName</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <sql>SELECT id FROM BasicCmp WHERE lastName = ?</sql>
            </query>
            <query>
                <query-method>
                    <method-name>findEmptyCollection</method-name>
                    <method-params/>
                </query-method>
                <sql>SELECT id FROM BasicCmp WHERE 1 = 0</sql>
            </query>
            <resource-ref>
                <ref-name>jdbc/basic/entityDatabase</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </entity>
        <entity>
            <ejb-name>AOBasicCmpBean</ejb-name>
            <jndi-name>client/tests/entity/cmp/allowed_operations/EntityHome</jndi-name>
            <query>
                <query-method>
                    <method-name>findByLastName</method-name>
                    <method-params>
                        <method-param>java.lang.String</method-param>
                    </method-params>
                </query-method>
                <sql>SELECT id FROM AOBasicCmp WHERE lastName = ?</sql>
            </query>
            <query>
                <query-method>
                    <method-name>findEmptyCollection</method-name>
                    <method-params/>
                </query-method>
                <sql>SELECT id FROM AOBasicCmp WHERE 1 = 0</sql>
            </query>
            <resource-ref>
                <ref-name>jdbc/basic/entityDatabase</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
            <resource-ref>
                <ref-name>entity/references/Resource_manager_access</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </entity>
        <entity>
            <ejb-name>EncCmpBean</ejb-name>
            <jndi-name>client/tests/entity/cmp/EncBean</jndi-name>
            <resource-ref>
                <ref-name>jdbc/basic/entityDatabase</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
            <resource-ref>
                <ref-name>datasource</ref-name>
                <target-name>DefaultDatasource</target-name>
            </resource-ref>
        </entity>
        <entity>
            <ejb-name>CmpRMIIIOPBean</ejb-name>
            <jndi-name>client/tests/entity/cmp/RMI-over-IIOP/EJBHome</jndi-name>
        </entity>
    </enterprise-beans>

</openejb-jar>
